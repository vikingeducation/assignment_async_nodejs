var fs= require('fs');

var readFile=function(path){
  var dataPromise = new Promise(function(resolve, reject){
    fs.readFile(path, 'utf8', function(err, data){
      if (err) throw err;
      resolve(data);
    });
  });
  return dataPromise;
}

var writeFile= function(path, content){
  var writePromise = new Promise(function(resolve, reject){
    fs.writeFile(path, content, 'utf8', function(err,data){
      if (err) throw err;
      resolve(content);
    })
  })
  return writePromise;
};


var appendFile= function(path, content){
  var appendPromise = new Promise(function(resolve, reject){
    var finished = readFile(path).then(data =>{
      var newcontent = data + content;
      return writeFile(path, newcontent).then(newcontent=>{
        return newcontent;
      });
    });
    resolve(finished);
  })

  return appendPromise;
}

module.exports = {
  readFile: readFile,
  writeFile: writeFile,
  appendFile: appendFile
}